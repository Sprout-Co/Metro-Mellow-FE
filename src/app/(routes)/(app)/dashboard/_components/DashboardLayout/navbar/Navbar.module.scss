@import "@/styles/abstracts/variables";
@import "@/styles/abstracts/functions";
@import "@/styles/abstracts/mixins";
@import "@/styles/abstracts/animations";

.navbar {
  width: 100%;
  background-color: color("neutral", "lightest");
  box-shadow: shadow("sm");
  position: sticky;
  top: 0;
  z-index: z-index("sticky");

  &__container {
    @include container;
    @include flex-between;
    height: 4.5rem; // 72px
    padding: spacing("sm") spacing("md");

    @include breakpoint-down("md") {
      padding: spacing("xs") spacing("sm");
    }
  }

  // Logo styles
  &__logoContainer {
    @include flex-center;
    gap: spacing("sm");
  }

  &__logo {
    @include flex-center;
    text-decoration: none;
  }

  &__logoText {
    @include font-size("lg");
    @include font-weight("bold");
    font-family: $font-family-heading;
    color: color("neutral", "darkest");
  }

  &__logoTextHighlight {
    color: color("primary", "base");
  }

  &__location {
    @include flex;
    align-items: center;
    gap: spacing("xs");
    color: color("neutral", "darkest");
    margin-left: spacing("lg");
    cursor: pointer;

    svg {
      color: color("primary", "base");
      width: 20px;
      height: 20px;
    }

    @include breakpoint-down("lg") {
      display: none;
    }
  }

  &__locationText {
    @include font-size("sm");
    white-space: nowrap;
  }

  // Navigation links
  &__links {
    @include flex-center;
    height: 100%;

    @include breakpoint-down("md") {
      display: none;
    }
  }

  &__linkContainer {
    @include flex;
    gap: spacing("lg");
    height: 100%;
  }

  &__linkItem {
    position: relative;
    @include flex-center;
    height: 100%;
    padding: 0 spacing("xs");
    cursor: pointer;

    a {
      @include font-size("body-2");
      @include font-weight("medium");
      text-decoration: none;
      color: color("neutral", "darkest");
      letter-spacing: letter-spacing("normal");
      text-transform: capitalize;
    }

    &--active {
      a {
        color: color("primary", "base");
        @include font-weight("semibold");
      }
    }
  }

  &__linkIndicator {
    position: absolute;
    bottom: -1px;
    left: 0;
    width: 100%;
    height: 3px;
    background-color: color("primary", "base");
    border-radius: border-radius("sm") border-radius("sm") 0 0;
  }

  // Right section with actions
  &__actions {
    @include flex;
    gap: spacing("md");
    align-items: center;

    @include breakpoint-down("lg") {
      gap: spacing("sm");
    }
  }
  &__iconButton {
    @include flex-center;
    width: 2.5rem;
    height: 2.5rem;
    border-radius: border-radius("full");
    color: color("neutral", "dark");
    cursor: pointer;
    transition: $transition-base;

    &:hover {
      background-color: color("neutral", "lighter");
      color: color("primary", "base");
    }

    @include breakpoint-down("sm") {
      width: 2rem;
      height: 2rem;
    }
  }

  &__notificationDropdown {
    .trigger {
      @include flex-center;
      width: 2.5rem;
      height: 2.5rem;
      border-radius: border-radius("full");
      color: color("neutral", "dark");
      cursor: pointer;
      transition: $transition-base;
      background: none;
      border: none;
      padding: 0;

      &:hover {
        background-color: color("neutral", "lighter");
        color: color("primary", "base");
      }

      &:focus {
        outline: none;
        box-shadow: 0 0 0 2px color("primary", "base");
      }

      .bellIcon {
        width: 1.25rem;
        height: 1.25rem;
      }

      @include breakpoint-down("sm") {
        width: 2rem;
        height: 2rem;

        .bellIcon {
          width: 1rem;
          height: 1rem;
        }
      }
    }

    // Ensure dropdown appears above other elements
    z-index: z-index("dropdown");
  }

  &__cartContainer {
    position: relative;
  }

  &__cartBadge {
    position: absolute;
    top: -8px;
    right: -8px;
    width: 18px;
    height: 18px;
    border-radius: border-radius("full");
    background-color: color("secondary", "base");
    color: color("neutral", "white");
    @include flex-center;
    @include font-size("xs");
    @include font-weight("bold");
  }

  // User profile section
  &__profile {
    @include flex;
    align-items: center;
    gap: spacing("sm");
    cursor: pointer;

    @include breakpoint-down("sm") {
      .navbar__profileGreeting {
        display: none;
      }
    }
  }

  &__profileGreeting {
    @include font-size("sm");
    color: color("neutral", "darkest");

    @include breakpoint-down("md") {
      display: none;
    }
  }

  &__profileAvatar {
    width: 2.5rem;
    height: 2.5rem;
    border-radius: border-radius("full");
    background-color: color("primary", "base");
    color: color("neutral", "white");
    @include flex-center;

    @include breakpoint-down("sm") {
      width: 2rem;
      height: 2rem;
    }
  }

  &__menuIcon {
    @include flex-center;
    width: 2.5rem;
    height: 2.5rem;
    border-radius: border-radius("xl");
    color: color("neutral", "white");
    background-color: color("primary", "base");
    cursor: pointer;
    transition: $transition-base;
  }

  // Mobile menu button
  &__menuButton {
    display: none;
    background: none;
    border: none;
    cursor: pointer;
    color: color("neutral", "darkest");
    padding: spacing("xs");

    @include breakpoint-down("md") {
      display: block;
    }
  }

  // Mobile menu
  &__mobileMenu {
    width: 100%;
    background-color: color("neutral", "white");
    border-top: 1px solid color("neutral", "light");
    overflow: hidden;

    @include breakpoint-up("md") {
      display: none;
    }
  }

  &__mobileMenuItem {
    padding: spacing("md");
    border-bottom: 1px solid color("neutral", "light");

    a {
      @include font-size("body-2");
      text-decoration: none;
      color: color("neutral", "darkest");
      display: block;
      width: 100%;
    }

    &--active {
      background-color: color("neutral", "light");

      a {
        color: color("primary", "base");
        @include font-weight("semibold");
      }
    }
  }
}
