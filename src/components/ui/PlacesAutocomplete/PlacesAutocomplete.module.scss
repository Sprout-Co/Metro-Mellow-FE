@import "@/styles/abstracts/variables";
@import "@/styles/abstracts/functions";
@import "@/styles/abstracts/mixins";

// PlacesAutocomplete - BEM Structure
// Block: places-autocomplete

.places-autocomplete {
  position: relative;
  width: 100%;

  // Element: Input Wrapper
  &__input-wrapper {
    display: flex;
    align-items: center;
    gap: spacing("sm");
    padding: spacing("sm") spacing("md");
    background-color: color("neutral", "lightest");
    border: border-width("thin") solid color("neutral", "lighter");
    border-radius: border-radius("lg");
    transition: $transition-fast;

    &:focus-within {
      border-color: color("status", "success");
      box-shadow: 0 0 0 3px color-alpha("status", "success", 0.1);
    }
  }

  // Element: Search Icon
  &__search-icon {
    flex-shrink: 0;
    color: color("neutral", "medium");
  }

  // Element: Input
  &__input {
    flex: 1;
    border: none;
    background: transparent;
    @include font-size("sm");
    color: color("neutral", "darkest");
    outline: none;

    &::placeholder {
      color: color("neutral", "medium");
    }
  }

  // Element: Loader
  &__loader {
    flex-shrink: 0;
    color: color("status", "success");
    animation: spin 1s linear infinite;
  }

  // Element: Clear Button
  &__clear-btn {
    @include flex-center;
    padding: spacing("xxs");
    border: none;
    background: transparent;
    color: color("neutral", "dark");
    cursor: pointer;
    border-radius: border-radius("sm");
    transition: $transition-fast;

    &:hover {
      background-color: color("neutral", "lighter");
      color: color("neutral", "darkest");
    }
  }

  // Element: Suggestions List
  &__suggestions {
    position: absolute;
    top: calc(100% + spacing("xs"));
    left: 0;
    right: 0;
    margin: 0;
    padding: spacing("xs");
    list-style: none;
    background-color: color("neutral", "white");
    border: border-width("thin") solid color("neutral", "lighter");
    border-radius: border-radius("lg");
    box-shadow: shadow("lg");
    z-index: z-index("dropdown");
    max-height: 280px;
    overflow-y: auto;
  }

  // Element: Suggestion Item
  &__suggestion-item {
    display: flex;
    align-items: center;
    gap: spacing("sm");
    padding: spacing("sm") spacing("md");
    cursor: pointer;
    border-radius: border-radius("md");
    transition: background-color transition-duration("fast") transition-timing("ease");

    &:hover {
      background-color: color("neutral", "lightest");
    }
  }

  // Element: Icon Wrapper
  &__icon-wrapper {
    @include flex-center;
    width: 32px;
    height: 32px;
    flex-shrink: 0;
    background-color: color("neutral", "lighter");
    border-radius: border-radius("full");
    color: color("neutral", "dark");
  }

  // Element: Text Wrapper
  &__text-wrapper {
    display: flex;
    flex-direction: column;
    gap: spacing("xxs");
    text-align: left;
    min-width: 0;
  }

  // Element: Main Text
  &__main-text {
    @include font-size("sm");
    @include font-weight("medium");
    color: color("neutral", "darkest");
    @include truncate;
  }

  // Element: Secondary Text
  &__secondary-text {
    @include font-size("sm");
    color: color("neutral", "dark");
    @include truncate;
  }
}

@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}
